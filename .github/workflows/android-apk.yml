{"name":"Build Android APK","on":{"workflow_dispatch":{}},"jobs":{"build":{"runs-on":"ubuntu-latest","steps":[{"uses":"actions/checkout@v4"},{"uses":"subosito/flutter-action@v2","with":{"flutter-version":"3.24.3"}},{"name":"Create Flutter scaffold","run":"flutter create --project-name tensor_alerts --platforms=android ."},{"name":"Patch Gradle for CI debug build","run":"sed -i \"/com.google.gms.google-services/d\" android/app/build.gradle || true; sed -i \"/com.google.gms.google-services/d\" android/app/build.gradle.kts || true"},{"name":"Force Java/Kotlin targets to 17 everywhere","run":"find android -type f \\( -name \"*.gradle\" -o -name \"*.kts\" \\) -print0 | xargs -0 sed -i \"s/VERSION_1_8/VERSION_17/g; s/JVM_1_8/JVM_17/g; s/jvmTarget = '1.8'/jvmTarget = '17'/g; s/jvmTarget = \\\"1.8\\\"/jvmTarget = \\\"17\\\"/g\""},{"name":"Show patched lines","run":"grep -RIn \"VERSION_17\\|jvmTarget\\|VERSION_1_8\\|JVM_1_8\" android || true"},{"name":"Flutter pub get","run":"flutter pub get"},{"name":"Build APK","run":"flutter build apk --debug"},{"name":"Upload APK","uses":"actions/upload-artifact@v4","with":{"name":"tensor-alerts-apk","path":"build/app/outputs/flutter-apk/app-debug.apk"}}]}}}
